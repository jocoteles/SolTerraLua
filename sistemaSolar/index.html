<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Sistema Solar</title>
    <meta name="description" content="Sistema Solar">
    <script src="/aframe/aframe-master.js"></script>
    <script src="/aframe/info-message.js"></script>
    <script src="/aframe/aframe-environment-component.min.js"></script>    
    <script src="/color-change.js"></script>        
    <script src="/button.js"></script>
    <script src="/menu.js"></script>
    <script src="/pressable.js"></script>
    <script src="/event-manager.js"></script>
    <script src="/orbitais.js"></script>
  </head>
  <body>    
    <a-scene
      info-message="htmlSrc: #messageText"
      xr-mode-ui="XRMode: xr"
    >
      <a-assets>
        <a-asset-item id="messageText" src="/message.html"></a-asset-item>
        <img id="solMapa" src="assets/sol.jpg">
        <img id="mercurioMapa" src="assets/mercurio.png">
      </a-assets>      
      <a-entity id="solGeometry1" visible="true">
        <a-entity id="solGeometry2">
          <a-entity id="solGeometry3">
            <a-entity id="solGeometry4"
              material="src: #solMapa"        
              scale = "0.2 0.2 0.2"
              geometry="primitive: sphere; radius: 1.0">
            </a-entity>
          </a-entity>          
        </a-entity>
      </a-entity>
      <a-entity
        id="merGeometry"
        position="0 2.0 -1"
        rotation="45 45 0"
        material="src: #mercurioMapa"
        geometry="primitive: sphere; radius: 0.4" 
        scale = "1 1 1"       
        visible="false"        
      ></a-entity>
      <a-entity id="menu" menu="width:0.4; height:0.4" position="0 1.5 -0.5" rotation="-45 0 0" event-manager>
        <a-entity id="button1" button="label: 1; width: 0.05" position="-0.15 0.16 0"></a-entity>
        <a-entity id="button2" button="label: 2; width: 0.05" position="-0.05 0.16 0"></a-entity>
        <a-entity id="button3" button="label: 3; width: 0.05" position=" 0.05 0.16 0"></a-entity>
        <a-entity id="button4" button="label: 4; width: 0.05" position=" 0.15 0.16 0"></a-entity>
        <a-entity id="solButton" button="label: sol; width: 0.08; color:#f7e927" position="-0.12 0.08 0"></a-entity>
        <a-entity id="merButton" button="label: mer; width: 0.08; color:#8f8a4a" position=" 0.00 0.08 0"></a-entity>
        <a-entity id="venButton" button="label: ven; width: 0.08; color:#c5aa51" position=" 0.12 0.08 0"></a-entity>
        <a-entity id="terButton" button="label: ter; width: 0.08; color:#5cc465" position="-0.12 0.00 0"></a-entity>
        <a-entity id="marButton" button="label: mar; width: 0.08; color:#d4805e" position=" 0.00 0.00 0"></a-entity>
        <a-entity id="jupButton" button="label: jup; width: 0.08; color:#c5bd51" position=" 0.12 0.00 0"></a-entity>
        <a-entity id="satButton" button="label: sat; width: 0.08; color:#beb070" position="-0.12 -0.08 0"></a-entity>
        <a-entity id="uraButton" button="label: ura; width: 0.08; color:#7cc0c9" position=" 0.00 -0.08 0"></a-entity>
        <a-entity id="netButton" button="label: net; width: 0.08; color:#5176c5" position=" 0.12 -0.08 0"></a-entity>        
        <a-entity id="todosButton" button="label: todos; width: 0.25" position="0 -0.16 0"></a-entity>
      </a-entity>
      <a-entity hand-tracking-controls="hand: left"></a-entity>
      <a-entity hand-tracking-controls="hand: right"></a-entity>
    </a-scene>

    <script type="module" src="index.js"></script> 
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();        
        //console.log(escalas.a1.periodoOrbital);
        const a3RaioOrbital = escalas.a3.raioOrbital.max/raioOrbital.net**escalas.a3.raioOrbital.potencia;        
        const a3PeriodoOrbital = 1000*escalas.a3.periodoOrbital.max/periodoOrbital.net**escalas.a3.periodoOrbital.potencia;
        const a3PeriodoRotacao = 1000*escalas.a3.periodoRotacao.max/periodoRotacao.net**escalas.a3.periodoRotacao.potencia;
        document.getElementById("solGeometry2").setAttribute("position", `0 ${escalas.a3.altura} ${-a3RaioOrbital*raioOrbital.ter**escalas.a3.raioOrbital.potencia}`);
        document.getElementById("solGeometry3").setAttribute("rotation", `${inclinacaoEixo.ter} 0 0}`);
        document.getElementById("solGeometry1").setAttribute("animation", `property: rotation; to: 0 360 0; loop: true; dur: ${a3PeriodoOrbital*periodoOrbital.ter**escalas.a3.periodoOrbital.potencia}; easing: linear`);
        document.getElementById("solGeometry2").setAttribute("animation", `property: rotation; to: 0 -360 0; loop: true; dur: ${a3PeriodoOrbital*periodoOrbital.ter**escalas.a3.periodoOrbital.potencia}; easing: linear`);
        document.getElementById("solGeometry4").setAttribute("animation", `property: rotation; to: 0 360 0; loop: true; dur: ${a3PeriodoRotacao*periodoRotacao.ter**escalas.a3.periodoRotacao.potencia}; easing: linear`);
        //animation="property: position; to: 0 2.0 -2; loop: true; dur: 5000; dir: alternate"          
    </script>
  </body>
</html>
